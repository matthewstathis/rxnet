<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>RxNet Windowed Apps</title>
  <style>
    body {
      font-family: sans-serif;
      background-color: #f5f5f5;
      padding: 20px;
    }

    .taskbar {
      margin-bottom: 20px;
    }

    .taskbar button {
      background-color: #148275;
      color: white;
      padding: 10px 20px;
      margin: 5px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }

    .popup {
      position: absolute;
      top: 100px;
      left: 100px;
      width: 800px;
      height: 500px;
      border: 2px solid #148275;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.4);
      background-color: white;
      display: flex;
      flex-direction: column;
      resize: both;
      overflow: hidden;
    }

    .popup-header {
      background-color: #148275;
      color: white;
      padding: 10px;
      cursor: move;
      display: flex;
      justify-content: space-between;
      align-items: center;
      user-select: none;
    }

    .popup-header .title {
      font-weight: bold;
    }

    .popup-header .controls {
      display: flex;
      gap: 5px;
    }

    .popup-header button {
      background: none;
      border: none;
      color: white;
      font-size: 16px;
      cursor: pointer;
    }

    .popup iframe {
      flex: 1;
      width: 100%;
      border: none;
    }

    .minimized {
      display: none !important;
    }
  </style>
</head>
<body>

  <div class="taskbar">
    <button onclick="createPopup('myDocs', 'https://storeresources.cvsapps.com/?user_ard=MTYzMQ==&employee_ID=MTA5Mzk5MQ==&user_firstname=TWF0dGhldw==&user_lastname=U3RhdGhpcw==&user_title=UGhhcm1hY2lzdA==')">myDocs</button>
    <button onclick="createPopup('Clinical Pharmacology', 'https://www.clinicalkey.com/pharmacology/')">Clinical Pharm</button>
    <button onclick="createPopup('Rx Phone Order', 'https://matthewstathis.github.io/rxnet/rxtelephonev2.pdf')">Rx Phone Order</button>
    <button onclick="createPopup('Formulary', 'https://matthewstathis.github.io/rxnet/formulary')">Formulary</button>
    <button onclick="createPopup('Task List', 'https://matthewstathis.github.io/rxnet/reminders.html')">Task List</button>
    <button onclick="createPopup('Nightscout', 'https://ms-nightscout.azurewebsites.net')">Nightscout</button>

  </div>

  <script>
    let zIndex = 10;

    function createPopup(title, url) {
      const popup = document.createElement("div");
      popup.className = "popup";
      popup.style.zIndex = zIndex++;

      const header = document.createElement("div");
      header.className = "popup-header";

      const titleSpan = document.createElement("span");
      titleSpan.className = "title";
      titleSpan.innerText = title;

      const controls = document.createElement("div");
      controls.className = "controls";

      const minimizeBtn = document.createElement("button");
      minimizeBtn.innerText = "–";
      minimizeBtn.onclick = () => popup.classList.toggle("minimized");

      const closeBtn = document.createElement("button");
      closeBtn.innerText = "✕";
      closeBtn.onclick = () => popup.remove();

      controls.appendChild(minimizeBtn);
      controls.appendChild(closeBtn);
      header.appendChild(titleSpan);
      header.appendChild(controls);

      const iframe = document.createElement("iframe");
      iframe.src = url;

      popup.appendChild(header);
      popup.appendChild(iframe);
      document.body.appendChild(popup);

      // Drag support
      let offsetX, offsetY, isDragging = false;
      header.addEventListener("mousedown", e => {
        isDragging = true;
        offsetX = e.clientX - popup.offsetLeft;
        offsetY = e.clientY - popup.offsetTop;
        popup.style.zIndex = zIndex++;
      });

      document.addEventListener("mousemove", e => {
        if (isDragging) {
          popup.style.left = `${e.clientX - offsetX}px`;
          popup.style.top = `${e.clientY - offsetY}px`;
        }
      });

      document.addEventListener("mouseup", () => isDragging = false);
    }
  </script>

</body>
</html>
